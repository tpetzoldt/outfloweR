<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>outfloweR-Exercises • outfloweR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="exercises_files/libs/quarto-html/popper.min.js"></script><script src="exercises_files/libs/quarto-html/tippy.umd.min.js"></script><link href="exercises_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="exercises_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="outfloweR-Exercises">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">outfloweR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4-1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/outfloweR.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/exercises.html">`outfloweR`-Exercises</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>
<code>outfloweR</code>-Exercises</h1>

      <p class="author">Thomas Petzoldt</p>
      <p class="date">2025-06-29</p>


      <div class="d-none name"><code></code></div>
    </div>






    <section class="section level2"><h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Let’s assume a theoretical drinking water reservoir with a maximum depth of about 50m and a volume of 60 Mio m<sup>3</sup>.</p>
<p>Due to varying meteorological and hydrological conditions, the onset and offset of stratification varies from year to year, with an average start and end day (given as day of year) given in Table <a href="#tbl-stratification" class="quarto-xref">Table 1</a>.</p>
<div id="tbl-stratification" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-tbl"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-stratification-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table 1: Average start and end days of stratification in a reservoir
</figcaption><div aria-describedby="tbl-stratification-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table caption-top">
<thead><tr class="header">
<th style="text-align: right;">Year</th>
<th style="text-align: right;">Start (day)</th>
<th style="text-align: right;">End (day)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1990</td>
<td style="text-align: right;">116</td>
<td style="text-align: right;">299</td>
</tr>
<tr class="even">
<td style="text-align: right;">2000</td>
<td style="text-align: right;">112</td>
<td style="text-align: right;">311</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2010</td>
<td style="text-align: right;">107</td>
<td style="text-align: right;">321</td>
</tr>
<tr class="even">
<td style="text-align: right;">2020</td>
<td style="text-align: right;">102</td>
<td style="text-align: right;">333</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2025</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">338</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>We see a clear trend of an elongated stratification due to climate warming. This effect has marked influence on water quality and the avaliablility of cold hypolimnetic water for drinking water production.</p>
<p>Here we should also note, that while the start is mostly climate induced, the end day is also influenced by management. So the end of the stratification is determined by either</p>
<ul>
<li>by cooling of the water column in autumn and in consequence thermal convection, or</li>
<li>by management, when the hypolimnion volume is exhausted by water abstraction</li>
</ul>
<p>This combined effect can be estimated by hydrophysical modeling, see for example <span class="citation" data-cites="Feldbauer2020">Feldbauer et al. (<a href="#ref-Feldbauer2020" role="doc-biblioref">2020</a>)</span>.</p>
<p>But as to the **outfloweR-App simulates only mass balance, we have to set the value for the onset and “final” end of stratification as input parameter, where the “final end” would be an approximate time of convection.</p>
<p>The volume-balance App is, however, able to estimate an earlier stratification end due to management. In such cases, temperature may still be relatively high with negative consequences to water quality and higher costs of drinking water production in the water works.</p>
</section><section class="section level2"><h2 id="exercises">Exercises<a class="anchor" aria-label="anchor" href="#exercises"></a>
</h2>
<p>In the following, let’s explore the relationship between the <strong>day</strong> and the <strong>initial volume</strong> at the onset of stratification on the availability of hypolimnetic water. Here we consider an earlier end of stratification as potentially negative for the water quality. This is of course a simplification, because also other factors play a role that need either to be measured or to be modeled with more complex hydrophysical and water quality models.</p>
<p>Nevertheless, the examples below can give some fundamental insights.</p>
<section class="level3"><h4 id="exercise-1">Exercise 1<a class="anchor" aria-label="anchor" href="#exercise-1"></a>
</h4>
<p>Let’s assume we have the climate from 2000.</p>
<ol type="1">
<li>Determine the minimum initial volume, that is sufficient for maintaining stratification until October 1st (day 274) with standard management.
<ol type="a">
<li>in a normal year</li>
<li>in a dry year</li>
<li>in a wet year</li>
</ol>
</li>
<li>Repeat the same experiment with strategy “Environmental discharge from epilimnion”</li>
</ol>
<p>Task: Create a table summarizing your findings for both management strategies and all three year types. Discuss the results, providing evidence from the app’s plots and numerical outputs. How can the surprising results of epilimnetic discharge in the dry year be explained? Look at the volume of the environmental discharge, possibly using a cumulative plot.</p>
</section><section class="level3"><h4 id="exercise-2">Exercise 2<a class="anchor" aria-label="anchor" href="#exercise-2"></a>
</h4>
<p>Let’s assume we the climate from 2025.</p>
<ol type="1">
<li>Determine the minimum initial volume, that is sufficient for maintaining stratification until October 1st (day 274) with standard management.
<ol type="a">
<li>in a normal year</li>
<li>in a dry year</li>
<li>in a wet year</li>
</ol>
</li>
<li>Repeat the same experiment with strategy “Environmental discharge from epilimnion”</li>
</ol>
<p><strong>Task:</strong> Create a table summarizing your findings. Discuss the results, again providing evidence from the app. How do these results compare to Exercise 1, and what insights do they provide about the climate trend? How can the surprising results of epilimnetic discharge in the dry year be explained? <!--
as.Date("2001-09-30") - as.Date("2000-12-31")
--></p>
</section><section class="level3"><h4 id="exercise-3">Exercise 3<a class="anchor" aria-label="anchor" href="#exercise-3"></a>
</h4>
<p>Let’s assume we have wet year and an initial volume of 60 Mio m<sup>3</sup>:</p>
<ol type="1">
<li>How long will the stratification last
<ol type="a">
<li>for a year with the climate of 1990</li>
<li>for a year with the climate of 2000</li>
<li>for a year with the climate of 2025</li>
</ol>
</li>
<li>Repeat the same experiment with strategy “Environmental discharge from epilimnion”</li>
<li>Now use the theoretical “summer flood” example to understand the result.</li>
</ol>
<p><strong>Task:</strong> Create a table summarizing your findings for all climate years and strategies. Why can the paradox be explained that high inflow in summer results in lower availability of high-quality hypolimnetic raw water? Consider the “cold inflow to hypolimnion” strategy. It is not completely realistic, but points to another management option – how might it theoretically help?</p>
</section><section class="level3"><h4 id="exercise-4">Exercise 4<a class="anchor" aria-label="anchor" href="#exercise-4"></a>
</h4>
<p>In the examples above, fixed time series for inflows and outflows were used in a way, so that the total volume was balanced. In a real reservoir, we should expect decreasing volume during the summer. The effect can be shown in the app using “Constant in - and outflows”.</p>
<p>What happens <strong>in the standard strategy</strong> in consecutive dry years:</p>
<ul>
<li>Inflow = 0.1, raw water = 0.1 and environmental outflow = 0.05 Mio m<sup>3</sup>
</li>
</ul>
<ol type="1">
<li>In the first year?</li>
<li>In a 2nd year with the same in- and outflows, but initial volume from the previous year?</li>
<li>in a 3rd year?</li>
</ol>
<p><strong>Task:</strong> Create a table summarizing the initial and final total and hypolimnion volumes and stratification durations for each year. Discuss the results. How does the reservoir’s hypolimnion volume change over multiple dry years under this constant management strategy, and what implications does this have for water supply?</p>
</section></section><section class="section level2"><h2 id="acknowledgments">Acknowledgments<a class="anchor" aria-label="anchor" href="#acknowledgments"></a>
</h2>
<p>Many thanks to Johannes Feldbauer for his contributions and discussion. This documentation was written using <strong>knitr</strong> <span class="citation" data-cites="knitr">(<a href="#ref-knitr" role="doc-biblioref">Xie 2015</a>)</span> and <strong>Quarto</strong> <span class="citation" data-cites="quarto">(<a href="#ref-quarto" role="doc-biblioref">Allaire and Dervieux 2024</a>)</span>.</p>
</section><section class="section level2"><h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-quarto" class="csl-entry" role="listitem">
Allaire, JJ, and Christophe Dervieux. 2024. <em>Quarto: R Interface to ’Quarto’ Markdown Publishing System</em>. <a href="https://doi.org/10.32614/CRAN.package.quarto" class="external-link">https://doi.org/10.32614/CRAN.package.quarto</a>.
</div>
<div id="ref-Feldbauer2020" class="csl-entry" role="listitem">
Feldbauer, Johannes, David Kneis, Tilo Hegewald, Thomas U. Berendonk, and Thomas Petzoldt. 2020. <span>“Managing Climate Change in Drinking Water Reservoirs: Potentials and Limitations of Dynamic Withdrawal Strategies.”</span> <em>Environmental Sciences Europe</em> 32 (1): 48. <a href="https://doi.org/10.1186/s12302-020-00324-7" class="external-link">https://doi.org/10.1186/s12302-020-00324-7</a>.
</div>
<div id="ref-knitr" class="csl-entry" role="listitem">
Xie, Yihui. 2015. <em>Dynamic Documents with <span>R</span> and Knitr</em>. 2nd ed. Boca Raton, Florida: Chapman; Hall/CRC. <a href="https://yihui.org/knitr/" class="external-link">https://yihui.org/knitr/</a>.
</div>
</div>
<hr></section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Thomas Petzoldt, LuGu.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
